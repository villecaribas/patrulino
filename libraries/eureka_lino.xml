<blocks app="Snap! 9.0, https://snap.berkeley.edu" version="2"><palette><category name="LINO" color="250,138,20,1"/><category name="EUREKA WebSocket II" color="16,179,0,1"/></palette><block-definition s="criar conexao ip:porta %&apos;ipporta&apos;" type="reporter" category="LINO"><header></header><code></code><translations></translations><inputs><input type="%txt">127.0.0.1:2023</input></inputs><script><block s="doReport"><custom-block s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 %br abrir conexão com ws:// %s"><block var="ipporta"/></custom-block></block></script></block-definition><block-definition s="%&apos;conexao&apos; LED: %&apos;cor&apos; comando: %&apos;comando&apos;" type="command" category="LINO"><header></header><code></code><translations></translations><inputs><input type="%obj"></input><input type="%txt">builtin<options>branco&#xD;laranja&#xD;amarelo&#xD;vermelho&#xD;verde&#xD;azul&#xD;builtin</options></input><input type="%txt">alterna<options>liga&#xD;desliga&#xD;alterna</options></input></inputs><script><block s="doDeclareVariables"><list><l>led</l><l>comando_</l></list></block><block s="doIf"><block s="reportVariadicAnd"><list><block s="reportIsA"><block var="cor"/><l><option>number</option></l></block><block s="reportVariadicGreaterThanOrEquals"><list><block var="cor"/><l>1</l></list></block><block s="reportVariadicLessThanOrEquals"><list><block var="cor"/><l>7</l></list></block></list></block><script><block s="doSetVar"><l>led</l><block var="cor"/></block></script><list><l><bool>true</bool></l><script><block s="doIf"><block s="reportVariadicEquals"><list><block var="cor"/><l>branco</l></list></block><script><block s="doSetVar"><l>led</l><l>2</l></block></script><list><block s="reportVariadicEquals"><list><block var="cor"/><l>laranja</l></list></block><script><block s="doSetVar"><l>led</l><l>3</l></block></script><block s="reportVariadicEquals"><list><block var="cor"/><l>amarelo</l></list></block><script><block s="doSetVar"><l>led</l><l>4</l></block></script><block s="reportVariadicEquals"><list><block var="cor"/><l>vermelho</l></list></block><script><block s="doSetVar"><l>led</l><l>5</l></block></script><block s="reportVariadicEquals"><list><block var="cor"/><l>verde</l></list></block><script><block s="doSetVar"><l>led</l><l>6</l></block></script><block s="reportVariadicEquals"><list><block var="cor"/><l>azul</l></list></block><script><block s="doSetVar"><l>led</l><l>7</l></block></script><block s="reportVariadicEquals"><list><block var="cor"/><l>builtin</l></list></block><script><block s="doSetVar"><l>led</l><l>1</l></block></script><l><bool>true</bool></l><script><block s="doRun"><block s="reportJSFunction"><list></list><l>alert("ERROR - LED não disponível");</l></block><list></list></block><block s="doReport"><l></l></block></script></list></block></script></list></block><block s="doIf"><block s="reportVariadicOr"><list><block s="reportVariadicEquals"><list><block var="comando"/><l>1</l></list></block><block s="reportVariadicEquals"><list><block var="comando"/><l>0</l></list></block><block s="reportVariadicEquals"><list><block var="comando"/><l>a</l></list></block></list></block><script><block s="doSetVar"><l>comando_</l><block var="comando"/></block></script><list><l><bool>true</bool></l><script><block s="doIf"><block s="reportVariadicEquals"><list><block var="comando"/><l>liga</l></list></block><script><block s="doSetVar"><l>comando_</l><l>1</l></block></script><list><block s="reportVariadicEquals"><list><block var="comando"/><l>desliga</l></list></block><script><block s="doSetVar"><l>comando_</l><l>0</l></block></script><block s="reportVariadicEquals"><list><block var="comando"/><l>alterna</l></list></block><script><block s="doSetVar"><l>comando_</l><l>a</l></block></script><l><bool>true</bool></l><script><block s="doRun"><block s="reportJSFunction"><list></list><l>alert("ERROR -Comando para o LED não disponível");</l></block><list></list></block><block s="doReport"><l></l></block></script></list></block></script></list></block><custom-block s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 %br enviar %s para conexão %obj"><block s="reportJoinWords"><list><l>l</l><block var="led"/><block var="comando_"/></list></block><block var="conexao"/></custom-block></script></block-definition><block-definition s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 $nl abrir conexão com ws:// %&apos;url&apos;" type="reporter" category="EUREKA WebSocket II"><header></header><code></code><translations></translations><inputs><input type="%s">localhost:2023</input></inputs><script><block s="doDeclareVariables"><list><l>a</l></list></block><block s="doSetVar"><l>a</l><block s="evaluate"><block s="reportJSFunction"><list><l>url</l></list><l>var ws = new WebSocket(&apos;ws://&apos; + url);&#xD;&#xD;return message =&gt; {&#xD;  if(message == &apos;enviar&apos;)&#xD;    return data =&gt; ws.send(data);&#xD;  if(message == &apos;fechar&apos;)&#xD;    return () =&gt; ws.close();&#xD;  if (message == &apos;estaconectado&apos;){  &#xD;    if (ws.readyState === WebSocket.OPEN) {&#xD;       return true;&#xD;    } else {&#xD;       return false;&#xD;    }&#xD;  }&#xD;  if(message == &apos;onmessage&apos;) {&#xD;    return proc =&gt; {&#xD;      ws.onmessage = (e) =&gt; {&#xD;        var stage = this.parentThatIsA(StageMorph) || this;&#xD;        var process = new Process();&#xD;        process.initializeFor(proc, new List([e.data]));&#xD;        stage.threads.processes.push(process);&#xD;      }&#xD;    }&#xD;  }&#xD;};</l></block><list><block var="url"/></list></block></block><block s="doWaitUntil"><custom-block s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 %br conectado? %obj"><block var="a"/></custom-block></block><block s="doReport"><block var="a"/></block></script></block-definition><block-definition s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 $nl enviar %&apos;data&apos; para conexão %&apos;ws&apos;" type="command" category="EUREKA WebSocket II"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%obj"></input></inputs><script><block s="doIf"><custom-block s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 %br conectado? %obj"><block var="ws"/></custom-block><script><block s="doRun"><block s="evaluate"><block var="ws"/><list><l>enviar</l></list></block><list><block var="data"/></list></block></script><list><l><bool>true</bool></l><script><block s="doRun"><block s="reportJSFunction"><list></list><l>alert("ERROR - DESCONECTADO");</l></block><list></list></block></script></list></block></script></block-definition><block-definition s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 $nl quando receber de %&apos;ws&apos; execute %&apos;procedure&apos;" type="command" category="EUREKA WebSocket II"><header></header><code></code><translations></translations><inputs><input type="%obj"></input><input type="%cmdRing"></input></inputs><script><block s="doIf"><custom-block s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 %br conectado? %obj"><block var="ws"/></custom-block><script><block s="doRun"><block s="evaluate"><block var="ws"/><list><l>onmessage</l></list></block><list><block var="procedure"/></list></block></script><list><l><bool>true</bool></l><script><block s="doRun"><block s="reportJSFunction"><list></list><l>alert("ERROR - DESCONECTADO");</l></block><list></list></block></script></list></block></script></block-definition><block-definition s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 $nl quando receber de %&apos;ws&apos; %&apos;dados&apos; faça %&apos;procedure&apos;" type="command" category="EUREKA WebSocket II"><header></header><code></code><translations></translations><inputs><input type="%obj"></input><input type="%upvar"></input><input type="%cs"></input></inputs><script><custom-block s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 %br quando receber de %obj execute %cmdRing"><block var="ws"/><block s="reifyScript"><script><block s="doSetVar"><l>dados</l><l></l></block><block s="doRun"><block var="procedure"/><list><l></l></list></block></script><list></list></block></custom-block></script></block-definition><block-definition s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 $nl fechar conexao %&apos;ws&apos;" type="command" category="EUREKA WebSocket II"><header></header><code></code><translations></translations><inputs><input type="%obj"></input></inputs><script><block s="doIf"><custom-block s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 %br conectado? %obj"><block var="ws"/></custom-block><script><block s="doRun"><block s="evaluate"><block var="ws"/><list><l>fechar</l></list></block><list></list></block></script><list><l><bool>true</bool></l><script><block s="doRun"><block s="reportJSFunction"><list></list><l>alert("ERROR - DESCONECTADO");</l></block><list></list></block></script></list></block></script></block-definition><block-definition s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 $nl conectado? %&apos;con&apos;" type="predicate" category="EUREKA WebSocket II"><header></header><code></code><translations></translations><inputs><input type="%obj"></input></inputs><script><block s="doIf"><block s="reportNot"><block s="reportIsA"><block var="con"/><l><option>number</option></l></block></block><script><block s="doReport"><block s="evaluate"><block var="con"/><list><l>estaconectado</l></list></block></block></script><list></list></block><block s="doReport"><block s="reportBoolean"><l><bool>false</bool></l></block></block></script></block-definition><block-definition s="%&apos;conexao&apos; monitora botões" type="command" category="LINO"><header></header><code></code><translations></translations><inputs><input type="%obj"></input></inputs><script><custom-block s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 %br quando receber de %obj %upvar faça %cs"><block var="conexao"/><l>dados</l><script><block s="doDeclareVariables"><list><l>dadosLista</l><l>separa_ip</l><l>mensagem</l></list></block><block s="doSetVar"><l>separa_ip</l><block s="reportTextSplit"><block var="dados"/><l>|</l></block></block><block s="doSetVar"><l>mensagem</l><block s="reportListItem"><l>2</l><block var="separa_ip"/></block></block><block s="doSetVar"><l>dadosLista</l><block s="reportTextSplit"><block var="mensagem"/><l>_</l></block></block><block s="doIf"><block s="reportVariadicEquals"><list><l>BTN</l><block s="reportListItem"><l>1</l><block var="dadosLista"/></block></list></block><script><block s="doIf"><block s="reportVariadicEquals"><list><l>BRANCO</l><block s="reportListItem"><l>2</l><block var="dadosLista"/></block></list></block><script><block s="doBroadcast"><l>CLICK BRANCO</l><list><l><option>all</option></l></list></block></script><list><block s="reportVariadicEquals"><list><l>AMARELO</l><block s="reportListItem"><l>2</l><block var="dadosLista"/></block></list></block><script><block s="doBroadcast"><l>CLICK AMARELO</l><list><l><option>all</option></l></list></block></script><block s="reportVariadicEquals"><list><l>VERMELHO</l><block s="reportListItem"><l>2</l><block var="dadosLista"/></block></list></block><script><block s="doBroadcast"><l>CLICK VERMELHO</l><list><l><option>all</option></l></list></block></script><block s="reportVariadicEquals"><list><l>VERDE</l><block s="reportListItem"><l>2</l><block var="dadosLista"/></block></list></block><script><block s="doBroadcast"><l>CLICK VERDE</l><list><l><option>all</option></l></list></block></script><block s="reportVariadicEquals"><list><l>AZUL</l><block s="reportListItem"><l>2</l><block var="dadosLista"/></block></list></block><script><block s="doBroadcast"><l>CLICK AZUL</l><list><l><option>all</option></l></list></block></script><block s="reportVariadicEquals"><list><l>PRETO</l><block s="reportListItem"><l>2</l><block var="dadosLista"/></block></list></block><script><block s="doBroadcast"><l>CLICK PRETO</l><list><l><option>all</option></l></list></block></script></list></block></script><list></list></block></script></custom-block></script></block-definition><block-definition s="%&apos;conexao&apos; echo %&apos;mensagem&apos;" type="command" category="LINO"><header></header><code></code><translations></translations><inputs><input type="%obj"></input><input type="%txt">EUREKA!!</input></inputs><script><custom-block s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 %br enviar %s para conexão %obj"><block s="reportJoinWords"><list><l>echo</l><block var="mensagem"/></list></block><block var="conexao"/></custom-block></script></block-definition><block-definition s="%&apos;conexao&apos; monitora potenciometro" type="command" category="LINO"><header></header><code></code><translations></translations><inputs><input type="%obj"></input></inputs><script><custom-block s="$Patrulha-0.618-81-157-214 $EU-0.618-255-214-0 $RE-0.618-214-36-8 $KA-0.618-78-190-69 $.org-0.618-0-0-0 $:-0.681 $WebSocket-0.681 $II-0.618 %br quando receber de %obj %upvar faça %cs"><block var="conexao"/><l>dados</l><script><block s="doDeclareVariables"><list><l>separa_ip</l><l>mensagem</l><l>dadosPot</l></list></block><block s="doSetVar"><l>separa_ip</l><block s="reportTextSplit"><block var="dados"/><l>|</l></block></block><block s="doSetVar"><l>mensagem</l><block s="reportListItem"><l>2</l><block var="separa_ip"/></block></block><block s="doSetVar"><l>dadosPot</l><block s="reportTextSplit"><block var="mensagem"/><l>_</l></block></block><block s="doIf"><block s="reportVariadicEquals"><list><l>PO1</l><block s="reportListItem"><l>1</l><block var="dadosPot"/></block></list></block><script><block s="doBroadcast"><l>PO1</l><list><l><option>all</option></l><block s="reportListItem"><l>2</l><block var="dadosPot"/></block></list></block></script><list><block s="reportVariadicEquals"><list><l>PO2</l><block s="reportListItem"><l>1</l><block var="dadosPot"/></block></list></block><script><block s="doBroadcast"><l>PO2</l><list><l><option>all</option></l><block s="reportListItem"><l>2</l><block var="dadosPot"/></block></list></block></script></list></block></script></custom-block></script></block-definition></blocks>